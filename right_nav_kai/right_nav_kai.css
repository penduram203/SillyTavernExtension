/*
SillyTavern 右ナビゲーションパネルのカスタムUI
スタイルが他のUIに影響しないように、すべてのセレクタとCSS変数のスコープを
#right-nav-panel 内に限定しています。
*/

/* ---------------------------------- /
/ 1. パネル全体のスタイルとローカル変数の定義 /
/ ---------------------------------- */
#right-nav-panel.openDrawer {
    /* ローカル変数を定義 */
    --avatar-base-height: 30vh;
    --avatar-base-width: 20vw;
    --avatar-base-border-radius-round: 0%;

    /* パネル自体のスタイル */
    width: 60vw !important;
    inset: 34px 0px 1px 85px !important;
    margin: 2px 2px 2px auto !important;
    height: auto !important;
}

/* ---------------------------------- /
/ 2. キャラクターリストのコンテナのスタイル /
/ ---------------------------------- */
#right-nav-panel #rm_print_characters_block {
    flex-flow: row wrap;
    align-content: normal;
    justify-content: normal;
    align-items: normal;
    overflow-y: auto;
}

/* ---------------------------------- /
/ 3. 個々のキャラクターブロックとアバターのスタイル   /
/ ---------------------------------- */
#right-nav-panel .character_select {
    width: 20% !important;
    height: 50% !important;
    box-sizing: border-box;
    padding: 5px;
    display: flex;
    gap: 0px;
    flex-wrap: wrap;
}

#right-nav-panel .character_select .avatar {
    width: var(--avatar-base-width) !important;
    height: var(--avatar-base-height) !important;
    border-radius: var(--avatar-base-border-radius-round) !important;
    overflow: hidden;
}

#right-nav-panel .character_select .avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: var(--avatar-base-border-radius-round) !important;
}

/* ---------------------------------- /
/ 4. ブロック内のコンテナとテキストのスタイル /
/ ---------------------------------- */
#right-nav-panel .character_select_container {
    height: 20%;
}

#right-nav-panel .tags.tags_inline {
    display: none !important;
}

#right-nav-panel .character_name_block {
    width: 11vw !important;
    height: 70% !important;
    margin-top: -5vh;
}

#right-nav-panel .character_name_block .ch_name {
    font-weight: 900;
    font-size: x-large;
    position: relative;
    -webkit-text-stroke: 2px black;
    text-stroke: 2px black;
    white-space: normal;
    overflow-wrap: break-word;
    padding-left: 0.5vw;
    line-height: 1.0;

    /* 複数行テキストを2行で省略表示するためのスタイル */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
    overflow: hidden;
}

#right-nav-panel .character_name_block .character_version {
    text-overflow: ellipsis;
    overflow: hidden;
    white-space: nowrap;
    max-width: 50%;
    display: none;
}

#right-nav-panel .wide100pLess70px {
    width: 100% !important;
}

#right-nav-panel .ch_description {
    height: 72% !important;
    margin-top: -2vh !important;
    flex-grow: 0 !important;
    overflow: hidden !important;
    white-space: normal;
}

/* ---------------------------------- /
/ 5. キャラクター作成/編集パネルのスタイル /
/ ---------------------------------- */
/* ★★★ 更新箇所 ★★★ */
#avatar_load_preview {
    width: 5vw !important;
    height: 5vh !important;
    object-fit: cover; /* 画像がコンテナに合わせて伸縮するように */
}
