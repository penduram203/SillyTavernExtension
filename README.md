# インストール
まず　https://github.com/penduram203/SillyTavernExtension/tree/main
にアクセスし、<br>
「<> code」をクリックしてから「Download ZIP」をクリックしてファイルをダウンロード<br>
![](https://files.catbox.moe/pn6hwh.png)<br>
<br>
ZIPファイルを解凍して、中にあるinstallerフォルダをSillyTavernフォルダに移動させる<br>
![](https://files.catbox.moe/lzsx5l.png)<br>
<br>
installerフォルダを開いてinstall.batをクリックして自動インストール開始<br>
linuxならinstall.shを自動インストール方法.txtに書いてある手順でインストール<br>
失敗する場合は手動インストール.txtを見て下さい<br>
![](https://files.catbox.moe/7humtn.png)<br>
<br>
これでインストール完了です<br>
right_nav_kaiとimage-displayに関しては追加設定が必要です<br>
<br>
# キャラの自作
#### 拡張機能とは無関係の公式機能ですが一応キャラ作成の方法を紹介しておきます<br>
#### まずキャラクター管理パネルを開いて新規キャラ作成アイコンをクリックします
![](https://files.catbox.moe/8bw9z3.png)<br>
<br>
#### 適当に記入して、入力が終わったら「キャラ作成」ボタンを押します<br>
#### より複雑なキャラを作成したい場合は「高度な設定」ボタンで編集して下さい
![](https://files.catbox.moe/ksi59b.png)<br>
<br>
#### これで自作キャラの完成です
![](https://files.catbox.moe/7qcqcc.png)<br>
# 画像の自動切り替え
背景とは別に画像表示ウインドウを用意し、ユーザーが入力したキーワードに応じて画像を自動的に切り替える機能です<br>
画面左下に殆ど透明な3つのボタンがあります<br>
<br>
「カスタムボタン」を押すとパネルが開いてウインドウの位置とサイズを自由に調整出来ます<br>
マウスでウインドウの端を直接ドラッグしても位置とサイズを自由に変更出来ます<br>
「最大化ボタン」を押すとウインドウが最大サイズに引き伸ばされます<br>
「左半分ボタン」を押すとウインドウが画面の左半分に寄ります<br>
![](https://files.catbox.moe/6am0o4.png)<br>
<br>
### 画像マッピング<br>
画像の自動切り替えを機能させる為にいくつか設定が必要です<br>
まずキャラクターを決めて、インストール時に作った「addchara」フォルダの中に「キャラクター名」フォルダを作成します<br>
例えば「azusa」という名前のキャラなら**SillyTavern/public/addchara/azusa/** となります<br>
キャラクター名のフォルダが既に存在する場合は新規作成の必要はありません<br>
<br>
フォルダを作ったらキャラクターエディット画面から **「JSONデータ編集」** ボタンを押します
![](https://files.catbox.moe/qsxfwl.png)<br>
<br>
すると以下のようなウインドウが開いてJSONデータの編集モードになります<br>
![](https://files.catbox.moe/a4m74d.png)<br>
②キーワードが何も入力されていない時に表示されるデフォルト画像のファイル名と拡張子<br>
③キャラクター選択画面で表示されるサムネイル画像のファイル名と拡張子<br>
④このキーワードがチャット欄に入力されると画像が自動で切り替わります<br>
　キーワードは一つだけでなく「|」で区切ると複数設定可能です<br>
　この⇩ように入力すると「町」「街」「マチ」「まち」４つの単語全てに反応します<br>
　**「町|街|マチ|まち」** <br>
　赤い×ボタンを押すとブロックごと削除されます<br>
⑤このボタンを押すとキーワードブロックが一つ追加されます<br>
⑥ユーザーが自分で用意してそれぞれのキャラクター名フォルダに置いておくべき画像ファイルの名前<br>
⑧現在の設定をセーブして次回の同キャラ選択時、或いは再起動時に自動復元します<br>
⑩現在の設定でJSONファイルが自動ダウンロードされます。このJSONファイルを元に画像が自動で切り替わります<br>
⑪当該パスに画像ファイルが無い場合は「image not found」が表示されます<br>
<br>
次にJSONファイルの内容通りに画像ファイルをaddchara/キャラクター名/の中に配置します<br>
キャラ名やアドレス欄は自分で自由に変更して下さい<br>
キーワードもキャラ名も画像ファイル名も自由ですが、キャラ名は実際のフォルダ名と一致させて下さい


例えば上記の構成なら「RPG風味」というフォルダ内にキャラクター名.jsonと画像ファイルを全て置いて下さい<br>
![](https://files.catbox.moe/5i2aad.png)<br>
<br>
全て完了したらSillyTavernを再起動して当該キャラを選択してチャットを開始します<br>
最初はデフォルト状態の「default.png」が表示され<br>
「"」で囲まれた、"ダンジョン１階"や"街の宿屋"といった単語がチャット欄に入力されると<br>
単語と関連したアドレスの画像が画像表示ウインドウに表示されます<br>
<br>
以下の画像では"川"という単語に反応して対応する画像が表示されています<br>
![](https://files.catbox.moe/izaf0p.png)<br>
<br>
これでキャラが選択されると自動的にJSONファイルが読み込まれ<br>
自動的に単語と結びつく画像が表示されます<br>
<br>
### これからSillyTavernでキャラを公開しようとしてる人達が上記の形式のZIPでキャラクターを配布すれば <br>
### ユーザー側は手間要らずで画像自動切り替え機能付きのAIチャットを楽しめるはずですから、それを推奨します <br>
<br>

①エクスポートのボタンを押して、②JSON形式を選択すると、キャラクター名.JSONファイルがダウンロードされます

![](https://files.catbox.moe/o3qux8.png)<br>
<br>
![](https://files.catbox.moe/kexpj5.png)<br>
<br>
掲示板などで配布すればユーザーは解凍して「addchara」フォルダに入れてインポートするだけです<br>

# ユーザーがやるべきこと<br>
ユーザーはダウンロードしたZIPファイルを解凍してフォルダごとpublic/addcharaフォルダにいれます<br>
**一旦SillyTavernを開いたブラウザの画面をF5キーで更新するか、ブラウザの更新ボタンを押して下さい**<br>
**更新ボタンを押さずにキャラをインポートすると正常に認識されませんのでご注意下さい**<br>
その状態でSillyTavernのキャラ選択画面からキャラクターインポートボタンをクリックします<br>
![](https://files.catbox.moe/7nubgm.png)<br>
<br>
ダウンロードしたキャラ名のフォルダを参照し、キャラクター名.jsonを選択すればインポート完了です<br>
# チャットウインドウの表示切り替え<br>
![](https://files.catbox.moe/38e5mq.png)<br>
<br>
画面左下にある殆ど透明な💡電球のアイコンをクリックするとチャットウインドウが隠れます<br>
💡電球アイコンをもう一度クリックするとチャットウインドウが再び表示されます<br>
<br>
# テキスト操作パネル<br>
左下の⚙歯車アイコンをクリックすると操作パネルが開きます<br>
パネルを操作することで文字のサイズや色をタグ別に調整することが出来ます<br>
タグは<p、<q、<emの3種類あり、
<br>
<pは通常テキスト、<qはキャラのセリフなど、<emは「*」で囲まれた文字列です<br>
パネルではサイズ、太さ、行間、透過度、文字色、縁取り色、縁取り幅などが設定出来ます<br>
「このスタイルを有効にする」のチェックを外すと、そのタグに対する装飾が無効になります<br>
⚙歯車アイコンをもう一度押すと操作パネルが隠れます<br>
<br>
![](https://files.catbox.moe/m7mz6i.png)<br>
<br>
⚙歯車アイコンの右側には殆ど透明な「中央ボタン」と「右半分ボタン」があります<br>
中央ボタンを押すとチャットウインドウが中央に、右半分ボタンを押すと右半分に寄ります<br>
<br>
![](https://files.catbox.moe/jnkvn3.png)<br>
<br>
チャットウインドウの右上をドラッグすると位置を変更、ウインドウの右下をドラッグするとサイズを変更出来ます<br>
<br>
